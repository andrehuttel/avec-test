"use strict";!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery||Zepto)}(function(c){var o=function(s,d,g){s=c(s);var e,m=this,o=s.val();d="function"==typeof d?d(s.val(),void 0,s,g):d;var y={invalid:[],getCaret:function(){try{var t,a=0,e=s.get(0),n=document.selection,r=e.selectionStart;return n&&-1===navigator.appVersion.indexOf("MSIE 10")?((t=n.createRange()).moveStart("character",s.is("input")?-s.val().length:-s.text().length),a=t.text.length):(r||"0"===r)&&(a=r),a}catch(t){}},setCaret:function(t){try{if(s.is(":focus")){var a,e=s.get(0);e.setSelectionRange?e.setSelectionRange(t,t):e.createTextRange&&((a=e.createTextRange()).collapse(!0),a.moveEnd("character",t),a.moveStart("character",t),a.select())}}catch(t){}},events:function(){s.on("input.mask keyup.mask",y.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){s.keydown().keyup()},100)}).on("change.mask",function(){s.data("changed",!0)}).on("blur.mask",function(){o===s.val()||s.data("changed")||s.triggerHandler("change"),s.data("changed",!1)}).on("blur.mask",function(){o=s.val()}).on("focus.mask",function(t){!0===g.selectOnFocus&&c(t.target).select()}).on("focusout.mask",function(){g.clearIfNotMatch&&!e.test(y.val())&&y.val("")})},getRegexMask:function(){for(var t,a,e,n,r,s,o=[],i=0;i<d.length;i++)(t=m.translation[d.charAt(i)])?(a=t.pattern.toString().replace(/.{1}$|^.{1}/g,""),e=t.optional,(n=t.recursive)?(o.push(d.charAt(i)),r={digit:d.charAt(i),pattern:a}):o.push(e||n?a+"?":a)):o.push(d.charAt(i).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return s=o.join(""),r&&(s=s.replace(new RegExp("("+r.digit+"(.*"+r.digit+")?)"),"($1)?").replace(new RegExp(r.digit,"g"),r.pattern)),new RegExp(s)},destroyEvents:function(){s.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(t){var a,e=s.is("input")?"val":"text";return 0<arguments.length?(s[e]()!==t&&s[e](t),a=s):a=s[e](),a},getMCharsBeforeCount:function(t,a){for(var e=0,n=0,r=d.length;n<r&&n<t;n++)m.translation[d.charAt(n)]||(t=a?t+1:t,e++);return e},caretPos:function(t,a,e,n){return m.translation[d.charAt(Math.min(t-1,d.length-1))]?Math.min(t+e-a-n,e):y.caretPos(t+1,a,e,n)},behaviour:function(t){t=t||window.event,y.invalid=[];var a=t.keyCode||t.which;if(-1===c.inArray(a,m.byPassKeys)){var e=y.getCaret(),n=y.val().length,r=e<n,s=y.getMasked(),o=s.length,i=y.getMCharsBeforeCount(o-1)-y.getMCharsBeforeCount(n-1);return y.val(s),!r||65===a&&t.ctrlKey||(8!==a&&46!==a&&(e=y.caretPos(e,n,o,i)),y.setCaret(e)),y.callbacks(t)}},getMasked:function(t){var a,e,n=[],r=y.val(),s=0,o=d.length,i=0,c=r.length,l=1,u="push",h=-1;for(g.reverse?(u="unshift",l=-1,a=0,s=o-1,i=c-1,e=function(){return-1<s&&-1<i}):(a=o-1,e=function(){return s<o&&i<c});e();){var f=d.charAt(s),v=r.charAt(i),p=m.translation[f];p?(v.match(p.pattern)?(n[u](v),p.recursive&&(-1===h?h=s:s===a&&(s=h-l),a===h&&(s-=l)),s+=l):p.optional?(s+=l,i-=l):p.fallback?(n[u](p.fallback),s+=l,i-=l):y.invalid.push({p:i,v:v,e:p.pattern}),i+=l):(t||n[u](f),v===f&&(i+=l),s+=l)}var k=d.charAt(a);return o!==c+1||m.translation[k]||n.push(k),n.join("")},callbacks:function(t){var a=y.val(),e=a!==o,n=[a,t,s,g],r=function(t,a,e){"function"==typeof g[t]&&a&&g[t].apply(this,e)};r("onChange",!0===e,n),r("onKeyPress",!0===e,n),r("onComplete",a.length===d.length,n),r("onInvalid",0<y.invalid.length,[a,t,s,y.invalid,g])}};m.mask=d,m.options=g,m.remove=function(){var t=y.getCaret();return y.destroyEvents(),y.val(m.getCleanVal()),y.setCaret(t-y.getMCharsBeforeCount(t)),s},m.getCleanVal=function(){return y.getMasked(!0)},m.init=function(t){if(t=t||!1,g=g||{},m.byPassKeys=c.jMaskGlobals.byPassKeys,m.translation=c.jMaskGlobals.translation,m.translation=c.extend({},m.translation,g.translation),m=c.extend(!0,{},m,g),e=y.getRegexMask(),!1===t){g.placeholder&&s.attr("placeholder",g.placeholder),"oninput"in c("input")[0]==!1&&"on"===s.attr("autocomplete")&&s.attr("autocomplete","off"),y.destroyEvents(),y.events();var a=y.getCaret();y.val(y.getMasked()),y.setCaret(a+y.getMCharsBeforeCount(a,!0))}else y.events(),y.val(y.getMasked())},m.init(!s.is("input"))};c.maskWatchers={};var a=function(){var t=c(this),a={},e="data-mask-",n=t.attr("data-mask");if(t.attr(e+"reverse")&&(a.reverse=!0),t.attr(e+"clearifnotmatch")&&(a.clearIfNotMatch=!0),"true"===t.attr(e+"selectonfocus")&&(a.selectOnFocus=!0),i(t,n,a))return t.data("mask",new o(this,n,a))},i=function(t,a,e){e=e||{};var n=c(t).data("mask"),r=JSON.stringify,s=c(t).val()||c(t).text();try{return"function"==typeof a&&(a=a(s)),"object"!=typeof n||r(n.options)!==r(e)||n.mask!==a}catch(t){}};c.fn.mask=function(t,a){a=a||{};var e=this.selector,n=c.jMaskGlobals,r=c.jMaskGlobals.watchInterval,s=function(){if(i(this,t,a))return c(this).data("mask",new o(this,t,a))};return c(this).each(s),e&&""!==e&&n.watchInputs&&(clearInterval(c.maskWatchers[e]),c.maskWatchers[e]=setInterval(function(){c(document).find(e).each(s)},r)),this},c.fn.unmask=function(){return clearInterval(c.maskWatchers[this.selector]),delete c.maskWatchers[this.selector],this.each(function(){var t=c(this).data("mask");t&&t.remove().removeData("mask")})},c.fn.cleanVal=function(){return this.data("mask").getCleanVal()};var t={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,watchDataMask:!(c.applyDataMask=function(t){((t=t||c.jMaskGlobals.maskElements)instanceof c?t:c(t)).filter(c.jMaskGlobals.dataMaskAttr).each(a)}),byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};c.jMaskGlobals=c.jMaskGlobals||{},(t=c.jMaskGlobals=c.extend(!0,{},t,c.jMaskGlobals)).dataMask&&c.applyDataMask(),setInterval(function(){c.jMaskGlobals.watchDataMask&&c.applyDataMask()},t.watchInterval)});